<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Covid-19 Data Visualization</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Common styles for all charts */
    body {
      background-color: #ADD8E6; /* Soothing light blue */
      font-family: 'Roboto', sans-serif;
      color: #333;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    h1 {
      margin: 20px 0;
      font-size: 2em;
      color: #222;
    }

    /* Buttons styling */
    button {
      padding: 10px 20px;
      margin: 5px;
      border: none;
      background-color: #007BFF;
      color: white;
      font-size: 1em;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #0056b3;
    }

    button.active-button {
      background-color: #4CAF50; /* Green */
      color: white;
    }

    /* Chart containers */
    .chart-container {
      display: flex;
      justify-content: space-around;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    svg {
      width: 30%;
      height: auto;
      margin: 10px;
    }

    /* Dropdown container */
    #dropdown-container {
      margin: 20px 0;
    }

    select {
      padding: 5px;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <h1>Covid-19 Data Visualization</h1>

  <!-- Dropdown for Bar and Pie Chart -->
  <div id="dropdown-container">
    <label for="chart-dropdown">Choose an attribute: </label>
    <select id="chart-dropdown" onchange="updateCharts()">
      <option value="sex">Sex</option>
      <option value="age_group">Age Group</option>
      <option value="race_ethnicity_combined">Race/Ethnicity</option>
      <option value="hosp_yn">Hospitalization</option>
      <option value="icu_yn">ICU</option>
      <option value="death_yn">Death</option>
      <option value="medcond_yn">Underlying Medical Conditions</option>
    </select>
  </div>

  <!-- Chart Containers -->
  <div class="chart-container">
    <svg id="barchart"></svg>
    <svg id="piechart"></svg>
    <svg id="heatmap"></svg>
  </div>

  <!-- JavaScript -->
  <script>
    // Shared dropdown logic
    function updateCharts() {
      const selectedValue = document.getElementById("chart-dropdown").value;

      // Update both bar chart and pie chart based on the selected value
      updateBarChart(selectedValue);
      updatePieChart(selectedValue);
    }

    function loadCharts() {
      // Initialize all charts
      populateDropdown();
      updateBarChart("sex"); // Initial attribute for bar chart
      updatePieChart("sex"); // Initial attribute for pie chart
      updateHeatmap();       // Heatmap does not use the dropdown
    }

    function populateDropdown() {
      // No need to populate dynamically as options are pre-defined in HTML
    }

    function updateBarChart(attribute) {
      // Logic to update bar chart based on the selected attribute
      console.log(`Bar Chart updated for: ${attribute}`);
    }

    function updatePieChart(attribute) {
      // Logic to update pie chart based on the selected attribute
      console.log(`Pie Chart updated for: ${attribute}`);
    }

    function updateHeatmap() {
      // Logic to initialize or update heatmap
      console.log("Heatmap updated");
    }

    // Load charts when the page is ready
    document.addEventListener("DOMContentLoaded", loadCharts);
  </script>
</body>
</html>
